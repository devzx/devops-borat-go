services: docker

env:
  global:
  - IMAGE_NAME: devzx/devops-borat
  - secure: SA8YlNS3Ni1N7LknnpBidYFZFYBNuoAo7twbydZQuRSe+ldDTplVTEYs7o+GTYCb9zS4IGEeHevbgLmvcj4QAjkWG5+2g2D1io3KO7JLbZb2oDAb4N0HGXynyyPYvD/MkYWUJ2FQli13LMLS7Jp+JYpgjSFOWtqoCgvPInLKTi1LUFKqM/WaIXsTkmP6c5hiFy5HDl8iIWSIHJAX9PqHXNJchgv4mQlGSbozlIvS1VpQq+b6rEN8GI2/8Pps5AhtzHkoHnsk72avDcx8MZN5j/6+8wvkUETYMjphaJn71CRh8UsqWsD+VWBwE/acBH/LNJlqi3J9wjJQqdMEQeRH4d6M3jMHPa43G0vE/PYVeg6TQfckfmgIymPODGov4Zq4hjxfiLK+7Bx6m8bKn0uwV13Ly2uZ+OP8bE1GNZIFoxtMkDAnzGs/2C8uFx26JUfuLUTfLD07OwN/juz3bCrNW+ANGqBdc+0txCrPb8SrXwiBPXuH/5P8PRLwl/WyF9qbJInOr1hYzVL/gWgSGMUFJggffN5tWVuqerqGJEbe1SeOr4BzzgqC4sNPvi4KJllcvmjgIvty5rEiCgyHvivnG6RbYF9+oEyrdiQmeBkKKPCdYTmeDatkEk0PStHuhD8+AkyUvfk/kbSS/ipEBCFpy66KFTGO1106QGRDvFBdjKw=
  - secure: sFq+kC6TG5PJvJJsZZSU5N/rvtfImqr3bWF4pVY8fUFsKblQtM0peo6zdZaKyfJCIo2NFw4AlZknb1duygWQ2khFHHu0oZ3hnpn+YyPvWzIX0dHZETna4hsngrevoabJjghyWGUDUEoEQfXmCowSUbIVjeEMi3GTAByZ69YLfZMb9UiCJPAo/DkaESULXQjfxc+kDvd7d1+E13+xcnXPQ9RrKcwzZi49tVnPtVyCxKfTDO6f2AIYnyxLpVIK3ssHaNTOvFrlDdat1WMfnYEKbewuc/jSR4/g+KIeH0oa0th9RV2YGAy99NWzz74utiYqe/0a2Yfc1VLeAO1jnRpMyCrPxJ0Wpz+eOZ5Usg7/oZJntxUEXMhi/3I928Sqb32jc8vN7F1Stl0WEE1VRHOLedRSPTHZHmN3UTjC+nEpqFVSO9El7YckxD4zd3apLHHkE4aYbBTe0lzPmlyoYvHfWO/E7ROcoypBIzkaenMLNUukgyiQNbPpGb0dUmq4wts8wEh7h5XPQCAiJlNNCn9aCCn87mohD8Ii3XyTrfiAJixiFSw4dbhi/7eqqtvSibGs/7iElzu9fr7u5Azk+CNdh4/JeoSbpFn+kDZIJdDNMpFHycQj3Z4NXPfWuuvpeSNQWq2X7ZpDps8DlygtuwYiLedyiqoDLUeAbv+EFfFHtQ0=

install: true

notfications:
  email: false

script:
  - docker build -t $IMAGE_NAME .

before_deploy:
  - echo $DOCKER_PASSWORD | docker login -u $DOCKER_USERNAME --password-stdin
  - docker tag $IMAGE_NAME:latest
  - docker tag $IMAGE_NAME:$TRAVIS_COMMIT

deploy:
  provider: script
  script: docker push $IMAGE_NAME:latest && docker push $IMAGE_NAME:$TRAVIS_COMMIT
  on:
    branch: master
